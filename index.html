<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Afiliados Shopee - Estilo Feminino</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #f8d7e3;
      --secondary-color: #fff0f5;
      --accent-color: #e07a9c;
      --dark-bg: #2c2c2c;
      --dark-text: #f8d7e3;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--primary-color);
      margin: 0;
      padding: 20px;
      color: #333;
      transition: background 0.3s;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: var(--accent-color);
      font-weight: 600;
    }

    input, button, textarea {
      font-family: 'Poppins', sans-serif;
      border-radius: 12px;
      padding: 10px;
      border: 1px solid #ccc;
      margin: 8px 0;
      width: 100%;
      box-sizing: border-box;
      transition: 0.2s;
    }

    .preview-box {
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 15px;
      margin-top: 10px;
      display: none;
      background-color: #fff9fc;
    }

    .preview-box img {
      width: 100px;
      border-radius: 10px;
      float: left;
      margin-right: 10px;
    }

    .preview-box h4 {
      margin: 0;
      color: #e07a9c;
    }

    .preview-box p {
      font-size: 0.9em;
      color: #555;
    }

    .clear { clear: both; }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--accent-color);
      color: white;
      padding: 10px 20px;
      border-radius: 10px;
      animation: fadeInOut 3s ease-in-out;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(20px); }
      10% { opacity: 1; transform: translateY(0); }
      90% { opacity: 1; }
      100% { opacity: 0; transform: translateY(20px); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Gerador de Links Shopee ðŸ’–</h1>

    <label for="codigo">CÃ³digo de Afiliado:</label>
    <input type="text" id="codigo" placeholder="Ex: GABY123" />

    <label for="link">Link do Produto:</label>
    <input type="text" id="link" placeholder="Cole o link da Shopee aqui" />

    <div id="preview" class="preview-box">
      <img id="preview-img" src="" alt="Imagem do produto" />
      <div>
        <h4 id="preview-title"></h4>
        <p id="preview-desc"></p>
        <div class="clear"></div>
      </div>
    </div>

    <label for="mensagem">Mensagem para WhatsApp:</label>
    <textarea id="mensagem" placeholder="Ex: Confira essa oferta imperdÃ­vel! ðŸ‘€"></textarea>

    <button onclick="gerarLink()">Gerar Link Afiliado</button>

    <div id="resultado" style="margin-top: 20px;"></div>
  </div>

  <script>
    const codigoInput = document.getElementById('codigo');
    const mensagemInput = document.getElementById('mensagem');
    const linkInput = document.getElementById('link');
    const previewBox = document.getElementById('preview');
    const previewImg = document.getElementById('preview-img');
    const previewTitle = document.getElementById('preview-title');
    const previewDesc = document.getElementById('preview-desc');
    const API_KEY = "02c58547ee8c03a9329370f4256a58a2";

    linkInput.addEventListener("input", () => {
      const url = linkInput.value.trim();
      if (!url.startsWith("http")) {
        previewBox.style.display = "none";
        return;
      }

      fetch(`https://api.linkpreview.net/?key=${API_KEY}&q=${encodeURIComponent(url)}`)
        .then(res => res.json())
        .then(data => {
          previewImg.src = data.image;
          previewTitle.textContent = data.title;
          previewDesc.textContent = data.description;
          previewBox.style.display = "block";
        })
        .catch(() => {
          previewBox.style.display = "none";
          notificar("NÃ£o foi possÃ­vel carregar a prÃ©-visualizaÃ§Ã£o.");
        });
    });

    function gerarLink() {
      const codigo = codigoInput.value.trim();
      const link = linkInput.value.trim();
      const mensagem = mensagemInput.value.trim() || "Confira esta oferta incrÃ­vel!";
      if (!codigo || !link) return notificar("Preencha todos os campos");

      const novoLink = link.includes('?') ? `${link}&af_id=${codigo}` : `${link}?af_id=${codigo}`;
      const whatsLink = `https://wa.me/?text=${encodeURIComponent(mensagem + '\n' + novoLink)}`;

      document.getElementById("resultado").innerHTML = `
        <p><strong>Link Gerado:</strong></p>
        <input type="text" value="${novoLink}" onclick="this.select()" readonly />
        <p><a href="${whatsLink}" target="_blank">ðŸ“² Enviar pelo WhatsApp</a></p>
      `;

      notificar("Link gerado com sucesso!");
    }

    function notificar(msg) {
      const toast = document.createElement("div");
      toast.className = "toast";
      toast.textContent = msg;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
  </script>
</body>
</html>
